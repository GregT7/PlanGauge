# Design Specification

## General
### System Implementation
_Description:_ Screenshot of how the frontend actually appears. The screenshot includes the 4 general sections for the Task Table, the Stat Card System, the Evaluation Section, and the Submission Button. These components help the user enter plans for the week, evaluate their feasibility, and submit the plan data to a Notion planning app.

![sys_img](https://github.com/user-attachments/assets/55d194d8-6773-4a10-a7be-0d087057deba)

### System Mockup
_Description:_ Mockup created at beginning of project using Figma outlining the desired appearance of the app.

![sys_mockup](https://github.com/user-attachments/assets/0729d516-406e-478e-b290-479cf677fbb0)

### Wireframe (ChatGPT Generated)
_Description:_ Wireframe generated by ChatGPT used to help create the Figma mockup

![wire_frame](https://github.com/user-attachments/assets/a1ef00bf-7da1-4f79-9436-f352fe45c096)


## R-1. Feasibility Categorization
###  Category Colors (R-1.10)
_Description:_ Screenshot of the 5 different stylings the stat cards can have reflecting the 5 unique statuses the system can categorize the plan as.

![category_colors](https://github.com/user-attachments/assets/56c2acac-727a-4bb8-8a0d-94c2bc77ae1f)

### Overall Feasibility (R-1.2)
_Description:_ Flowchart depicting the logic used to evaluate feasibility using the current data in the task table and historical metrics

![feas_algo](https://github.com/user-attachments/assets/f616c2b1-5d93-4308-99ae-057298af430d)


## R-2. Task Entry Table
### Table Structure (R-2.1, R-2.3)
_Description:_ Image showing how the task table appears when some data populates it

![table_struct](https://github.com/user-attachments/assets/03f35ac5-3d4b-4cd0-a318-3e116ff8a3f2)

### Add New Task Demo (R-2.2)
_Description:_ Shows how to add a new task to the table and the resulting change

![add_task](https://github.com/user-attachments/assets/797681b5-b745-4cd4-b33f-50f6356326e2)

### Delete Tasks Demo (R-2.2)
_Description:_ Shows multiple entries in the table being selected and then deleted

![delete](https://github.com/user-attachments/assets/3ac9f21d-8127-497e-8dd8-5ffc154458c1)

### Deselect Tasks Demo (R-2.2)
_Description:_ Shows how rows are deselected when anything other than a selection checkbox is clicked. This mimics the behavior experienced when selecting items in a Notion database.

![deselect](https://github.com/user-attachments/assets/2aa28230-b321-468b-abf2-e292568b422e)


## R-3. Stat Card System
### Default/Neutral State (R-3.1)
_Description:_ Visually depicts the stat card system appearance when the app is launched successfully and no data has been entered yet.

![default_state](https://github.com/user-attachments/assets/8937ab55-1d47-4663-976f-e646ccb247eb)

### Populated State (R-3.1)
_Description:_ Visually depicts the stat card system appearance when plan data has been entered into the Task Table and categorizations have been completed using the statistical metric data

![populated_state](https://github.com/user-attachments/assets/5a5837b1-524a-4f46-bfc6-2c036cd5d861)

### Adaptive Cards Demo (R-3.1)
_Description:_ Demo showing the stat card cycling through different states

![adaptive_card](https://github.com/user-attachments/assets/f0efacd3-aa43-4b2c-b767-a3947097d36c)

### System Demo (R-3.1)
_Description:_ Demo showing how the stat card system changes as data in the task table is modified

![stat_demo](https://github.com/user-attachments/assets/cd47e58d-93dc-470a-b667-d598ef58b822)

## R-4. Evaluation Section
### Component Demo (R-4.1)
_Description:_ Provides an overview of the full Evaluation Section in action, showing how overall feasibility, daily summaries, and supporting details are visually combined into a cohesive UI.

![eval_section](https://github.com/user-attachments/assets/be3f6bf4-71e1-4316-b0c0-254570566a1a)

### Summary Card Screenshot (R-4.2)
_Description:_ Displays the summary card with updated categorization and score values after successfully retrieving stats data and inputting valid plan entries into the table.

![summary_card](https://github.com/user-attachments/assets/3f391299-6827-4d44-9f29-3f425b1c4f51)

### Details Accordion (R-4.3)
_Description:_ Breaks down how the overall feasibility score is computed, including equations, weighting factors, and status filters used to determine the final evaluation category.

![details_accordion](https://github.com/user-attachments/assets/7d251851-73c2-4c49-888a-00388da765c7)


## R-5. Submission (R-5.1)
### Submission Swimlane Diagram (R-5.1)
_Description:_ Visually explains the algorithm used across systems to submit the plan records while managing errors

![submit_swimlane](https://github.com/user-attachments/assets/af1c8506-b8b6-4aa8-b8bc-66a486e7e5e2)

### Database Functional Dependency Diagram (R-5.1)
_Description:_ Updated schema for `plan_submission` to manage synchronization handling

![fdd_schema](https://github.com/user-attachments/assets/7859ea2f-b201-4494-9fe5-1e8cd48e95ba)

### Database Entity-Relation Diagram (R-5.1)
_Description:_ Visual of the SQL schema design for all tables in the database, image downloaded from Supabase

![ERD](https://github.com/user-attachments/assets/3a40b385-7ad4-4929-91fb-6de27db65087)

### Submission Response Toast (R-5.1)
_Description:_ Toast notifications are sent as soon as the app launches or user clicks the submission button for improved feedback. Once launching or submission is done, the notification will update to reflect its status (success/failure)

![submit_toast](https://github.com/user-attachments/assets/6df78f6c-7f8e-4c14-b43f-25c8c500fa9e)

### Submission Demo (R-5.1, R-5.2, R-5.3)
_Description:_ Demonstration showing the plan data being stored to the database and target Notion DB with notifications

![submit_gif](https://github.com/user-attachments/assets/c5f0720c-d734-42c3-827e-fa74ef04c224)

## R-6. UI/UX and Styling
### Adaptive Design (R-6.1)
_Description:_ The outer border of each subsystem container updates to reflect the current feasibility status (good - green, moderate - orange, poor - rose) based on the current state of the Task Table and retrieved statistical data

![adaptive_ui](https://github.com/user-attachments/assets/1b1b515d-7a8a-4050-9cf3-5f7494550ef3)

## R-7. System Behavior
### Startup Process Swimlane Diagram (R-7.1, R-7.2, R-7.3, R-7.4)
_Description:_ Shows the cross system logic for launching the app where the ui is loaded, all system connections are tested, and initial stats data is requested and hopefully received

![startup_swimlane](https://github.com/user-attachments/assets/76e31c5a-2130-40e6-b420-51ccab094d43)


### Frontend-initiated Request & Retrieval (R-7.1, R-7.2)
_Description:_ Shows how the frontend responds when the backend is offline versus when it becomes active and successfully returns data. The UI transitions from an error state to a neutral gray state once stats data is retrieved, indicating that the backend is running but no tasks are currently present in the table.

![stats_retrieval](https://github.com/user-attachments/assets/4a2bbb29-7792-4787-b8f3-12245d907431)

### Frontend Retrieval Toast Notification (R-7.3)
_Description:_ Displays the toast messages that appear on app launch, capturing both the stats retrieval attempt and the initial connection check that pings all system APIs to verify backend availability.

![stats_toast](https://github.com/user-attachments/assets/407b4481-fe45-46b3-842d-bae8cc15bf9a)

### Stats Retrieval API Endpoint (`/api/db/stats`) (R-7.2)
_Description:_ Demonstrates terminal outputs from curling the Flask stats API using different query parameters to test both error and success cases. This includes validation feedback for malformed inputs and the structured JSON response returned when valid date ranges are provided.

![stats_api](https://github.com/user-attachments/assets/d254eacf-e581-41a1-912b-4644b9f02704)

### Statistical Retrieval E2E Test (R-7.1, R-7.2, R-7.3)
_Description:_ Showcases an end-to-end test verifying the full stats retrieval workflow—from frontend request initiation to backend response and UI feedback—confirming that valid data updates visual elements and toast notifications as expected.

![feedback_e2e](https://github.com/user-attachments/assets/708ef933-3a19-484e-90b6-fac08093284f)

## R-8 Authentication
### Security DB Design (R-8.4, R-8.5)
_Description:_ Shows the db schema for the newly created tables `session` and `app_user`. Sessions are for temporary instances that allow users to gain access based on their allowed permissions while app users are linked to sessions and determine the role and degree of permissions a person has. 

![db_auth](https://github.com/user-attachments/assets/e65b2976-7bd6-4501-b60b-d210349c2763)

### Session Lifecycle (R-8.3, R-8.4, R-8.5)
_Description:_ State diagram that describes the session lifecycle including the creation, expiration, and revocation of access for a user.

![session_life](https://github.com/user-attachments/assets/09196ef9-046a-4bb8-b2d3-69b92bf1dd46)

### Login Process (R-8.1, R-8.3)
_Description:_ Swimlane diagram used to show the cross-system process of a user authenticating into the system

![login_swimlane](https://github.com/user-attachments/assets/604868b8-11a6-4f6e-8493-2ba37da72e3c)

### Login Modal (R-8.1, R-8.3)
_Description:_ The popup component used to collect login credentials from the user and to attempt authentication. Created using shadcn dialog component.

![login_modal](https://github.com/user-attachments/assets/6b01b68a-83f4-40f1-bc0d-57019b66c924)

### Login Demo (R-8.1, R-8.3)
_Description:_ Shows an instance of the login process: person clicks the login button, dialog popup spawns, user inputs the wrong credentials, submit is clicked, loading toast is launched, toast is resolved to show an error, user inputs the correct credentials, loading toast is launched, toast resolves to show success, visitor modal updates to "guest"

![login_demo](https://github.com/user-attachments/assets/f3f1042f-7417-48de-8f83-0732d49db8f2)

### Logout Process (R-8.2, R-8.3)
_Description:_ Swimlane diagram used to show the cross-system process of a user logging out of the system

![logout_swimlane](https://github.com/user-attachments/assets/8297325e-a057-45c5-b9b1-1c936d48e985)

### Logout Button (R-8.2, R-8.3)
_Description:_ Simple logout button with a logout api requesting function attached. Included for thoroughness.

![logout_button](https://github.com/user-attachments/assets/8abce149-650c-4158-8a64-21d912900e31)

### Logout Demo (R-8.2, R-8.3)
_Description:_ Shows an instance of the logout process: user clicks logout button, loading toast spawns and resolves to success, mode display updates to 'visitor' which is the role of a logged out user.

![logout_demo](https://github.com/user-attachments/assets/322db104-bf28-4fb2-a804-d05f1d533215)

## R-9 Role Based Access Control 
### RBAC Matrix (R-9.1, R-9.2, R-9.3)
_Description:_ Shows the permissions allowed to the three user roles: "owner" (most permissions), "guest" (almost all permissions aside from record storage), and "visitor" (least privileges, uses mock data/toasts)

![rbac_mtrx](https://github.com/user-attachments/assets/9d12555e-e4a7-495e-9571-589c3f3582ea)

### Mode Display (R-9.2)
_Description:_ Displays the role of the currently logged in user ("owner"|"guest"|"visitor")

![mode_display](https://github.com/user-attachments/assets/f88b9aa5-3b24-4196-b38d-ab057ee68f4c)

### Mock Processes (R-9.3)
_Description:_ Shows the mock plan submission, stat retrieval, and connection test launched with mock task data loaded when a logged out user visits the app (role is "visitor"). The mock stat retrieval function retrieves a static json object from the frontend that represents old, derived data. The connection test and plan submission functions simply wait on a timeout function and the mock task data is also retrieved from the frontend. These features are intended to give visitors to the app a brief idea of what's going on without granting them unnecessary functionality (ie they can't submit plan data to my Notion database or make API calls to retrieve and derive up-to-date stat values). This limits the usage of free tier deployment services I am utilizing which will improve the longevity of personal usage each month without paying additional fees.

![mock_process](https://github.com/user-attachments/assets/4fa7203f-851a-428d-bdc6-fb1ba340a765)